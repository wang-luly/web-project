<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>获取公共api</title>
</head>
<body>
    <button id="button">获取5条公共api</button>
    <div id="loading" style="display: none;">加载中...</div>
    <ul id="apiList"></ul>

    <script>
        document.querySelector('#button').addEventListener('click',async()=>{
            try{
                document.querySelector('#loading').style.display='block';
                const response=await fetch('https://jsonplaceholder.typicode.com/posts?_limit=10');
                if(!response.ok){
                    throw new Error('获取失败！状态码：'+response.status);
                }
                const data=await response.json();
                console.log('获取的数据：',data.entries[0]);
                const apiList=document.querySelector('#apiList');
                apiList.innerHTML=''; // 清空列表
                const entries=data.slice(0,5); // 获取前5条数据
                entries.forEach(entry=>{
                    const li=document.createElement('li');
                    li.innerHTML=`<strong>${entry.title}</strong>
                                    <p>${entry.body}</p>`;
                    apiList.appendChild(li);
                })
            }catch(error){
                console.error('发生错误啦宝宝：',error);
            }finally{
                console.log('请求完成');
                document.querySelector('#loading').style.display='none';
            }
        });
            
    </script>
</body>
</html>